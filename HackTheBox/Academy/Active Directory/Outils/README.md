Outils du métier
==================

* * * * *

De nombreuses sections du module nécessitent des outils tels que des scripts open source ou des binaires précompilés. Ceux-ci peuvent être trouvés dans le répertoire `C:\Tools` sur les hôtes Windows fournis dans les sections visant à attaquer à partir de Windows. Dans les sections qui se concentrent sur l'attaque d'AD à partir de Linux, nous fournissons un hôte Parrot Linux personnalisé pour l'environnement cible comme si vous étiez un utilisateur anonyme avec un hôte d'attaque au sein du réseau interne. Tous les outils et scripts nécessaires sont préchargés sur cet hôte (soit installés, soit dans le répertoire `/opt` ). Voici une liste de nombreux outils que nous aborderons dans ce module :

| Outil | Descriptif |
| --- | --- |
| [PowerView](https://github.com/PowerShellMafia/PowerSploit/blob/master/Recon/PowerView.ps1)/[SharpView](https://github.com/dmchell/SharpView) | Un outil PowerShell et un port .NET du même utilisé pour acquérir une connaissance de la situation dans AD. Ces outils peuvent être utilisés en remplacement de diverses commandes Windows `net*` et bien plus encore. PowerView et SharpView peuvent nous aider à collecter une grande partie des données de BloodHound, mais cela nécessite plus de travail pour établir des relations significatives entre tous les points de données. Ces outils sont parfaits pour vérifier quel accès supplémentaire nous pouvons avoir avec un nouvel ensemble d'informations d'identification, cibler des utilisateurs ou des ordinateurs spécifiques, ou trouver des "gains rapides" tels que des utilisateurs qui peuvent être attaqués via Kerberoasting ou ASREPRoasting. |
| [BloodHound](https://github.com/BloodHoundAD/BloodHound) | Utilisé pour cartographier visuellement les relations AD et aider à planifier les chemins d'attaque qui pourraient autrement passer inaperçus. Utilise l'ingestor [SharpHound](https://github.com/BloodHoundAD/BloodHound/tree/master/Collectors) PowerShell ou C# pour collecter des données à importer ultérieurement dans l'application BloodHound JavaScript (Electron) avec un [Neo4j](https ://neo4j.com/) base de données pour l'analyse graphique de l'environnement AD. |
| [SharpHound](https://github.com/BloodHoundAD/BloodHound/tree/master/Collectors) | Le collecteur de données C# pour collecter des informations à partir d'Active Directory sur divers objets AD tels que les utilisateurs, les groupes, les ordinateurs, les ACL, les GPO, les attributs d'utilisateur et d'ordinateur, les sessions utilisateur, etc. L'outil produit des fichiers JSON qui peuvent ensuite être ingérés dans l'outil d'interface graphique BloodHound pour analyse. |
| [BloodHound.py](https://github.com/fox-it/BloodHound.py) | Un ingestor BloodHound basé sur Python et basé sur [Impacket toolkit](https://github.com/CoreSecurity/impacket/). Il prend en charge la plupart des méthodes de collecte BloodHound et peut être exécuté à partir d'un hôte d'attaque non joint au domaine. La sortie peut être ingérée dans l'interface graphique BloodHound pour analyse. |
| [Kerbrute](https://github.com/ropnop/kerbrute) | Un outil écrit en Go qui utilise la pré-authentification Kerberos pour énumérer les comptes Active Directory, effectuer la pulvérisation de mots de passe et le forçage brutal. |
| [Boîte à outils Impacket](https://github.com/SecureAuthCorp/impacket) | Une collection d'outils écrits en Python pour interagir avec les protocoles réseau. La suite d'outils contient divers scripts pour énumérer et attaquer Active Directory. |
| [Répondeur](https://github.com/lgandx/Responder) | Responder est un outil spécialement conçu pour empoisonner LLMNR, NBT-NS et MDNS, avec de nombreuses fonctions différentes. |
| [Inveigh.ps1](https://github.com/Kevin-Robertson/Inveigh/blob/master/Inveigh.ps1) | Similaire à Responder, un outil PowerShell pour effectuer diverses attaques d'usurpation et d'empoisonnement du réseau. |
| [C# Inveigh (InveighZero)](https://github.com/Kevin-Robertson/Inveigh/tree/master/Inveigh) | La version C # d'Inveigh avec une console semi-interactive pour interagir avec les données capturées telles que les hachages de nom d'utilisateur et de mot de passe. |
| [rpcinfo](https://learn.microsoft.com/en-us/windows-server/administration/windows-commands/rpcinfo) | L'utilitaire rpcinfo est utilisé pour interroger l'état d'un programme RPC ou énumérer la liste des services RPC disponibles sur un hôte distant. L'option "-p" est utilisée pour spécifier l'hôte cible. Par exemple, la commande "rpcinfo -p 10.0.0.1" renverra une liste de tous les services RPC disponibles sur l'hôte distant, ainsi que leur numéro de programme, numéro de version et protocole. Notez que cette commande doit être exécutée avec des privilèges suffisants. |
| [rpcclient](https://www.samba.org/samba/docs/current/man-html/rpcclient.1.html) | Une partie de la suite Samba sur les distributions Linux qui peut être utilisée pour effectuer une variété de tâches d'énumération Active Directory via le service RPC distant. |
| [CrackMapExec (CME)](https://github.com/byt3bl33d3r/CrackMapExec) | CME est une boîte à outils d'énumération, d'attaque et de post-exploitation qui peut nous aider grandement à énumérer et à effectuer des attaques avec les données que nous recueillons. CME tente de "vivre de la terre" et d'abuser des fonctionnalités et protocoles AD intégrés tels que SMB, WMI, WinRM et MSSQL. |
| [Rubeus](https://github.com/GhostPack/Rubeus) | Rubeus est un outil C # conçu pour l'abus de Kerberos. |
| [GetUserSPNs.py](https://github.com/SecureAuthCorp/impacket/blob/master/examples/GetUserSPNs.py) | Un autre module Impacket visant à trouver des noms de principaux de service liés àutilisateurs normaux. |
| [Hashcat](https://hashcat.net/hashcat/) | Un excellent outil de craquage de hachage et de récupération de mot de passe. |
| [enum4linux](https://github.com/CiscoCXSecurity/enum4linux) | Un outil pour énumérer les informations des systèmes Windows et Samba. |
| [enum4linux-ng](https://github.com/cddmp/enum4linux-ng) | Une refonte de l'outil original Enum4linux qui fonctionne un peu différemment. |
| [ldapsearch](https://linux.die.net/man/1/ldapsearch) | Interface intégrée pour interagir avec le protocole LDAP. |
| [windapsearch](https://github.com/ropnop/windapsearch) | Un script Python utilisé pour énumérer les utilisateurs, les groupes et les ordinateurs AD à l'aide de requêtes LDAP. Utile pour automatiser les requêtes LDAP personnalisées. |
| [DomainPasswordSpray.ps1](https://github.com/dafthack/DomainPasswordSpray) | DomainPasswordSpray est un outil écrit en PowerShell pour effectuer une attaque par pulvérisation de mot de passe contre les utilisateurs d'un domaine. |
| [LAPSToolkit](https://github.com/leoloobeek/LAPSToolkit) | La boîte à outils comprend des fonctions écrites en PowerShell qui exploitent PowerView pour auditer et attaquer les environnements Active Directory qui ont déployé la solution de mot de passe de l'administrateur local (LAPS) de Microsoft. |
| [smbmap](https://github.com/ShawnDEvans/smbmap) | Énumération des partages SMB sur un domaine. |
| [psexec.py](https://github.com/SecureAuthCorp/impacket/blob/master/examples/psexec.py) | Faisant partie de la boîte à outils Impacket, il nous fournit des fonctionnalités de type Psexec sous la forme d'un shell semi-interactif. |
| [wmiexec.py](https://github.com/SecureAuthCorp/impacket/blob/master/examples/wmiexec.py) | Faisant partie de la boîte à outils Impacket, il offre la possibilité d'exécuter des commandes via WMI. |
| [Snaffler](https://github.com/SnaffCon/Snaffler) | Utile pour rechercher des informations (telles que des informations d'identification) dans Active Directory sur des ordinateurs avec des partages de fichiers accessibles. |
| [smbserver.py](https://github.com/SecureAuthCorp/impacket/blob/master/examples/smbserver.py) | Exécution simple du serveur SMB pour l'interaction avec les hôtes Windows. Un moyen facile de transférer des fichiers au sein d'un réseau. |
| [setspn.exe](https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-server-2012-r2-and-2012/cc731241(v=ws.11) ) | Ajoute, lit, modifie et supprime la propriété de répertoire des noms principaux du service (SPN) pour un compte de service Active Directory. |
| [Mimikatz](https://github.com/ParrotSec/mimikatz) | Remplit de nombreuses fonctions. Notamment, les attaques pass-the-hash, l'extraction de mots de passe en clair et l'extraction de tickets Kerberos de la mémoire sur un hôte. |
| [secretsdump.py](https://github.com/SecureAuthCorp/impacket/blob/master/examples/secretsdump.py) | Videz à distance les secrets SAM et LSA d'un hôte. |
| [evil-winrm](https://github.com/Hackplayers/evil-winrm) | Nous fournit un shell interactif sur un hôte via le protocole WinRM. |
| [mssqlclient.py](https://github.com/SecureAuthCorp/impacket/blob/master/examples/mssqlclient.py) | Faisant partie de la boîte à outils Impacket, il offre la possibilité d'interagir avec les bases de données MSSQL. |
| [noPac.py](https://github.com/Ridter/noPac) | Combo d'exploitation utilisant CVE-2021-42278 et CVE-2021-42287 pour usurper l'identité de DA à partir d'un utilisateur de domaine standard. |
| [rpcdump.py](https://github.com/SecureAuthCorp/impacket/blob/master/examples/rpcdump.py) | Fait partie de l'ensemble d'outils Impacket, mappeur de point de terminaison RPC. |
| [CVE-2021-1675.py](https://github.com/cube0x0/CVE-2021-1675/blob/main/CVE-2021-1675.py) | Printnightmare PoC en python. |
| [ntlmrelayx.py](https://github.com/SecureAuthCorp/impacket/blob/master/examples/ntlmrelayx.py) | Faisant partie de l'ensemble d'outils Impacket, il effectue des attaques de relais SMB. |
| [PetitPotam.py](https://github.com/topotam/PetitPotam) | Outil PoC pour CVE-2021-36942 pour contraindre les hôtes Windows à s'authentifier auprès d'autres machines via MS-EFSRPC EfsRpcOpenFileRaw ou d'autres fonctions. |
| [gettgtpkinit.py](https://github.com/dirkjanm/PKINITtools/blob/master/gettgtpkinit.py) | Outil de manipulation de certificats et de TGT. |
| [getnthash.py](https://github.com/dirkjanm/PKINITtools/blob/master/getnthash.py) | Cet outil utilisera un TGT existant pour demander un PAC pour l'utilisateur actuel utilisant U2U. |
| [adidnsdump](https://github.com/dirkjanm/adidnsdump) | Un outil pour énumérer et vider les enregistrements DNS d'un domaine. Semblable à l'exécution d'un transfert de zone DNS. |
| [gpp-decrypt](https://github.com/t0thkr1s/gpp-decrypt) | Extrait les noms d'utilisateur et les mots de passe des fichiers de préférences de la stratégie de groupe. |
| [GetNPUsers.py](https://github.com/SecureAuthCorp/impacket/blob/master/examples/GetNPUsers.py) | Fait partie de la boîte à outils Impacket. Utilisé pour effectuer l'attaque ASREPRoasting afin de répertorier et d'obtenir les hachages AS-REP pour les utilisateurs avec l'ensemble « Ne pas exiger la pré-authentification Kerberos ». Ces hachages sont ensuite introduits dans un outil tel que Hashcat pour les tentatives de craquage de mot de passe hors ligne. |
| [lookupsid.py](https://github.com/SecureAuthCorp/impacket/blob/master/examples/lookupsid.py) | Outil de force brute SID. |
| [ticketer.py](https://github.com/SecureAuthCorp/impacket/blob/master/examples/ticketer.py) | Un outil de création et de personnalisation des tickets TGT/TGS. Il peut être utilisé pourCréation de Golden Ticket, attaques de confiance enfant-parent, etc. |
| [raiseChild.py](https://github.com/SecureAuthCorp/impacket/blob/master/examples/raiseChild.py) | Faisant partie de la boîte à outils Impacket, il s'agit d'un outil d'escalade automatisée des privilèges de domaine enfant à parent. |
| [Active Directory Explorer](https://docs.microsoft.com/en-us/sysinternals/downloads/adexplorer) | Active Directory Explorer (AD Explorer) est un visualiseur et un éditeur AD. Il peut être utilisé pour naviguer dans une base de données AD et afficher les propriétés et les attributs des objets. Il peut également être utilisé pour enregistrer un instantané d'une base de données AD pour une analyse hors ligne. Lorsqu'un instantané AD est chargé, il peut être exploré en tant que version en direct de la base de données. Il peut également être utilisé pour comparer deux instantanés de base de données AD afin de voir les modifications apportées aux objets, aux attributs et aux autorisations de sécurité. |
| [PingCastle](https://www.pingcastle.com/documentation/) | Utilisé pour auditer le niveau de sécurité d'un environnement AD sur la base d'un cadre d'évaluation des risques et de maturité (basé sur [CMMI](https://en.wikipedia.org/wiki/Capability_Maturity_Model_Integration) adapté à la sécurité AD). |
| [Group3r](https://github.com/Group3r/Group3r) | Group3r est utile pour auditer et rechercher les erreurs de configuration de sécurité dans les objets de stratégie de groupe AD (GPO). |
| [ADRecon](https://github.com/adrecon/ADRecon) | Outil utilisé pour extraire diverses données d'un environnement AD cible. Les données peuvent être sorties au format Microsoft Excel avec des vues récapitulatives et une analyse pour faciliter l'analyse et brosser un tableau de l'état de sécurité global de l'environnement. |

[ Précédent](https://academy.hackthebox.com/module/143/section/1262)

Marquer terminé et suivant

[Suivant ](https://academy.hackthebox.com/module/143/section/1263)

Aide-mémoire Ressources